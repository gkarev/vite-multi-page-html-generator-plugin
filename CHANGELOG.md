# Changelog

–í—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥—É—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è [Semantic Versioning](https://semver.org/lang/ru/).

## [2.0.0] - 2025-11-03

### üî¥ –ö–†–ò–¢–ò–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (Breaking Changes)

#### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ò–°–ü–†–ê–í–õ–ï–ù–û**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è `htmlRoot` –ø—Ä–æ—Ç–∏–≤ path traversal –∞—Ç–∞–∫
  - –¢–µ–ø–µ—Ä—å –ø–ª–∞–≥–∏–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ `htmlRoot` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞
  - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`../../../etc`)
  - –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π
  - –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `validateHtmlRoot(userPath, projectRoot)`

#### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ò–°–ü–†–ê–í–õ–ï–ù–û**: –í—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ FS –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
  - `fs.existsSync()` ‚Üí `async access()` —Å `fs/promises`
  - `fs.readdirSync()` ‚Üí `async readdir()` —Å `fs/promises`
  - –•—É–∫ `config()` —Ç–µ–ø–µ—Ä—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (`async config()`)
  - –ë–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è event loop –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
  - `validateRoot()` –∏ `readDirectoryFiles()` —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ

### ‚ú® –£–ª—É—á—à–µ–Ω–∏—è

- **–î–û–ë–ê–í–õ–ï–ù–û**: –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `validateHtmlRoot()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **–£–õ–£–ß–®–ï–ù–û**: –ò–º–ø–æ—Ä—Ç—ã - –¥–æ–±–∞–≤–ª–µ–Ω—ã `relative`, `isAbsolute` –∏–∑ path
- **–£–õ–£–ß–®–ï–ù–û**: –ò–º–ø–æ—Ä—Ç—ã - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `{ access, readdir } from 'fs/promises'`
- **–£–õ–£–ß–®–ï–ù–û**: `validateRoot()` —Ç–µ–ø–µ—Ä—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- **–£–õ–£–ß–®–ï–ù–û**: `readDirectoryFiles()` —Ç–µ–ø–µ—Ä—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- **–£–õ–£–ß–®–ï–ù–û**: `discoverHtmlFiles()` —Ç–µ–ø–µ—Ä—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- **–£–õ–£–ß–®–ï–ù–û**: JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```javascript
// –î–û (v1.x)
function getRoot(config) {
  if (htmlRoot) {
    return resolve(config.root || process.cwd(), htmlRoot);
  }
  return config.root || process.cwd();
}

config(config) {
  const entries = discoverHtmlFiles(root, options);
  // ...
}

// –ü–û–°–õ–ï (v2.0)
function getRoot(config) {
  const projectRoot = config.root || process.cwd();
  return validateHtmlRoot(htmlRoot, projectRoot);
}

async config(config) {
  const entries = await discoverHtmlFiles(root, options);
  // ...
}
```

### ‚ö†Ô∏è Breaking Changes

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π**: –ü–ª–∞–≥–∏–Ω —Ç–µ–ø–µ—Ä—å –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –µ—Å–ª–∏ `htmlRoot` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –•—É–∫ `config()` —Ç–µ–ø–µ—Ä—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (Vite –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ —Å –≤–µ—Ä—Å–∏–∏ 2.0)

### üìä –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Path traversal —É—è–∑–≤–∏–º–æ—Å—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ ‚úÖ
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Event loop –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è ‚úÖ
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Vite API**: Async —Ö—É–∫ config() ‚úÖ
- **–û—Ü–µ–Ω–∫–∞ –ø–ª–∞–≥–∏–Ω–∞**: 7/10 ‚Üí 9/10 ‚úÖ

### üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è —Å v1.x –Ω–∞ v2.0

#### –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—É—Ç–∏ - –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è:

```javascript
// ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
viteMultiPageHtmlGeneratorPlugin({
  htmlRoot: undefined,  // –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
  exclude: []
})

// ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
viteMultiPageHtmlGeneratorPlugin({
  htmlRoot: 'src/pages',  // –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞
  exclude: []
})
```

#### –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—É—Ç–∏ –≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ - —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:

```javascript
// ‚ùå v1.x - —Ä–∞–±–æ—Ç–∞–ª–æ (—É—è–∑–≤–∏–º–æ—Å—Ç—å!)
viteMultiPageHtmlGeneratorPlugin({
  htmlRoot: '../../../etc'
})

// ‚úÖ v2.0 - –≤—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º
// Error: ‚ùå Security: htmlRoot "../../../etc" is outside project root
```

### üîç –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **Vite**: ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0
- **Node.js**: >=14.18.0
- **Async config hook**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å Vite 2.0+

### üìö –°—Å—ã–ª–∫–∏

- [PLUGINS_ANALYSIS.md](../../PLUGINS_ANALYSIS.md) - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–ª–∞–≥–∏–Ω–∞
- [PLUGINS_FIX_SUMMARY.md](../../PLUGINS_FIX_SUMMARY.md) - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

## [1.0.0] - 2024-10-28

### ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ

- üéâ –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ –ø–ª–∞–≥–∏–Ω–∞
- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ HTML —Ñ–∞–π–ª–æ–≤
- ‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ exclude –æ–ø—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ –∏ RegExp)
- üìù –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º—ë–Ω entry points
- üéØ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π htmlRoot
- üì¶ TypeScript –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤
- üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ entry names
- üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö rollupOptions

### üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Build-only**: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Å–±–æ—Ä–∫–∏ (`apply: 'build'`)
- **Zero dependencies**: –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **TypeScript support**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript
- **Safe config**: –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `vite-multi-page-html-generator-plugin.d.ts` - TypeScript —Ç–∏–ø—ã

